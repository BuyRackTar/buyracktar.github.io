"use strict";(self.webpackChunkcashcontrol=self.webpackChunkcashcontrol||[]).push([[128],{8128:(It,$,l)=>{l.r($),l.d($,{WalletModule:()=>Ot});var p=l(9808),w=l(1958),m=l(655),c=l(3346),_=l(4987),R=l(9300),Q=l(1497),t=l(5e3),x=l(7319),T=l(6693),C=l(2079),W=l(22),j=l(1105);let k=(()=>{class o{constructor(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-wallet-item"]],inputs:{wallet:"wallet"},decls:7,vars:6,consts:[[3,"showLoader","overlay"],[1,"wallet-link",3,"routerLink"],["textAlign","center"],[1,"tui-island__title"]],template:function(n,a){1&n&&(t.\u0275\u0275elementStart(0,"tui-loader",0)(1,"a",1)(2,"tui-island",2)(3,"h3",3),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd()()()()),2&n&&(t.\u0275\u0275property("showLoader",!a.wallet.currency)("overlay",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("routerLink","/wallets/"+a.wallet.id),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(a.wallet.name),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate2("Current balance: ",a.wallet.amount," ",null==a.wallet.currency?null:a.wallet.currency.name,""))},directives:[C.kM,w.yS,j.h],styles:[".wallet-link[_ngcontent-%COMP%]{display:block;text-decoration:none;cursor:pointer;border-radius:1rem;transition:box-shadow .4s ease}.wallet-link[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px 3px #a8cef1}"]}),o})();function q(o,e){1&o&&(t.\u0275\u0275elementStart(0,"h2",6),t.\u0275\u0275text(1," There are no wallets yet. "),t.\u0275\u0275elementEnd())}function tt(o,e){1&o&&t.\u0275\u0275element(0,"app-wallet-item",7),2&o&&t.\u0275\u0275property("wallet",e.$implicit)}function et(o,e){if(1&o&&(t.\u0275\u0275elementStart(0,"tui-loader",2),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275template(2,q,2,0,"h2",3),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementStart(4,"div",4),t.\u0275\u0275template(5,tt,1,1,"app-wallet-item",5),t.\u0275\u0275elementEnd()()),2&o){const n=e.tuiLet,a=t.\u0275\u0275nextContext();t.\u0275\u0275property("showLoader",!!t.\u0275\u0275pipeBind1(1,4,a.walletsLoading$))("overlay",!0),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!1===t.\u0275\u0275pipeBind1(3,6,a.walletsLoading$)&&0===(null==n?null:n.length)),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",n)}}let u=class{constructor(e){this.store=e,this.account$=this.store.select(Q.G0.selectAccount),this.wallets$=this.store.select(c.y7.selectWallets),this.walletsLoading$=this.store.select(c.y7.selectLoading)}ngOnInit(){this.account$.pipe((0,_.t)(this),(0,R.h)(e=>!!e)).subscribe(()=>this.store.dispatch(c.xr.loadWallets()))}};u.\u0275fac=function(e){return new(e||u)(t.\u0275\u0275directiveInject(x.yh))},u.\u0275cmp=t.\u0275\u0275defineComponent({type:u,selectors:[["app-wallet-table"]],decls:4,vars:3,consts:[["routerLink","/wallets/create","tuiButton","","size","m","shape","rounded",1,"tui-space_bottom-3"],[3,"showLoader","overlay",4,"tuiLet"],[3,"showLoader","overlay"],["class","no-wallets",4,"ngIf"],[1,"wallet-grid"],[3,"wallet",4,"ngFor","ngForOf"],[1,"no-wallets"],[3,"wallet"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"a",0),t.\u0275\u0275text(1," Create wallet\n"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(2,et,6,8,"tui-loader",1),t.\u0275\u0275pipe(3,"async")),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("tuiLet",t.\u0275\u0275pipeBind1(3,1,n.wallets$)))},directives:[w.yS,T.v0,W.Ls,C.kM,p.O5,p.sg,k],pipes:[p.Ov],styles:[".wallet-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));grid-gap:1rem;gap:1rem;align-items:stretch}.no-wallets[_ngcontent-%COMP%]{padding:1rem}"]}),u=(0,m.gn)([(0,_.c)()],u);var S=l(5221),D=l(262),O=l(7951),N=l(8859),P=l(7358),nt=l(5773),s=l(2382),b=l(3442),B=l(4004),A=l(6649),ot=l(6437),U=l(4620),z=l(5411),G=l(2558),y=l(6249),K=l(7447),at=l(1320),lt=l(1159),rt=l(6251),it=l(3881),H=l(625),Y=l(9232);function st(o,e){if(1&o&&(t.\u0275\u0275text(0),t.\u0275\u0275elementStart(1,"div"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()),2&o){const n=e.$implicit,a=t.\u0275\u0275nextContext();t.\u0275\u0275textInterpolate1(" ",a.getRingValue(n).toFixed(2)," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("Spendings: ",a.getRingLabel(n),"")}}class g{constructor(){this.transactionsSource=null,this.transactions=[],this.groupedSpends={}}ngOnChanges(){this.groupedSpends=this.getGroupedTransactionsSpends(this.transactions)}getRingValue(e){return Number.isNaN(e)?this.countTransactionsTotal():Object.values(this.groupedSpends)[e]}getRingLabel(e){return Number.isNaN(e)?"Total":Object.keys(this.groupedSpends)[e]}getRingChartValues(){return Object.values(this.groupedSpends)}getGroupedTransactionsSpends(e){return e.reduce((n,a)=>{var r,i,f;if(a.toWallet&&a.toWallet.id===(null===(r=this.transactionsSource)||void 0===r?void 0:r.id))return n;const F=a.amount;let L;L=a.category?`${null===(i=a.category)||void 0===i?void 0:i.name} (category)`:`${null===(f=a.toWallet)||void 0===f?void 0:f.name} (wallet)`;const Z=n[L];return n[L]=Z?Z+F:F,n},{})}countTransactionsTotal(){return Object.values(this.groupedSpends).reduce((e,n)=>e+n,0)}}g.\u0275fac=function(e){return new(e||g)},g.\u0275cmp=t.\u0275\u0275defineComponent({type:g,selectors:[["app-spends-ring"]],inputs:{transactionsSource:"transactionsSource",transactions:"transactions"},features:[t.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[["size","xl",3,"value","content"],["content",""]],template:function(e,n){if(1&e&&(t.\u0275\u0275element(0,"tui-ring-chart",0),t.\u0275\u0275template(1,st,3,2,"ng-template",null,1,t.\u0275\u0275templateRefExtractor)),2&e){const a=t.\u0275\u0275reference(2);t.\u0275\u0275property("value",n.getRingChartValues())("content",a)}},directives:[Y.i],styles:[""]}),(0,m.gn)([b.UM],g.prototype,"getRingValue",null),(0,m.gn)([b.UM],g.prototype,"getRingLabel",null);var ct=l(1732);function pt(o,e){if(1&o&&t.\u0275\u0275element(0,"tui-svg",11),2&o){const n=t.\u0275\u0275nextContext(2);t.\u0275\u0275classProp("icon_rotated",n.buttonsDropdownOpen)}}function mt(o,e){if(1&o){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"tui-data-list")(1,"a",12),t.\u0275\u0275text(2," Edit wallet "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(3,"tui-data-list")(4,"button",13),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n),t.\u0275\u0275nextContext();const r=t.\u0275\u0275reference(13);return t.\u0275\u0275nextContext().showDialog(r)}),t.\u0275\u0275text(5," Replenish "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"tui-data-list")(7,"button",13),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n),t.\u0275\u0275nextContext();const r=t.\u0275\u0275reference(15);return t.\u0275\u0275nextContext().showDialog(r)}),t.\u0275\u0275text(8," Make a transaction "),t.\u0275\u0275elementEnd()()}if(2&o){const n=t.\u0275\u0275nextContext().tuiLet;t.\u0275\u0275advance(1),t.\u0275\u0275property("routerLink","/wallets/edit/"+(null==n?null:n.id))}}const dt=function(o){return[o]},E=function(){return[]};function ut(o,e){if(1&o){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",14)(1,"h2",15),t.\u0275\u0275text(2,"Make a transaction:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"app-spends-form",16),t.\u0275\u0275listener("submitTransaction",function(r){const f=t.\u0275\u0275restoreView(n).$implicit;return t.\u0275\u0275nextContext(2).replenishWallet(r,f)})("cancelTransaction",function(){return t.\u0275\u0275restoreView(n).$implicit.complete()}),t.\u0275\u0275elementEnd()()}if(2&o){const n=t.\u0275\u0275nextContext().tuiLet,a=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("disableSource",!0)("chosenDestination",n)("wallets",n?t.\u0275\u0275pureFunction1(4,dt,n):t.\u0275\u0275pureFunction0(6,E))("spendTarget",a.SpendTargets.Wallet)}}function gt(o,e){if(1&o){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",14)(1,"h2",15),t.\u0275\u0275text(2,"Make a transaction:"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"app-spends-form",17),t.\u0275\u0275listener("submitTransaction",function(r){const f=t.\u0275\u0275restoreView(n).$implicit;return t.\u0275\u0275nextContext(2).makeTransaction(r,f)})("cancelTransaction",function(){return t.\u0275\u0275restoreView(n).$implicit.complete()}),t.\u0275\u0275pipe(4,"async"),t.\u0275\u0275pipe(5,"async"),t.\u0275\u0275elementEnd()()}if(2&o){const n=t.\u0275\u0275nextContext().tuiLet,a=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("chosenSource",n)("wallets",t.\u0275\u0275pipeBind1(4,3,a.wallets$)||t.\u0275\u0275pureFunction0(7,E))("categories",t.\u0275\u0275pipeBind1(5,5,a.categories$)||t.\u0275\u0275pureFunction0(8,E))}}function ht(o,e){if(1&o&&(t.\u0275\u0275elementStart(0,"tui-loader",18)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22)(5,"h3",23),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(7,"app-divider",24),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"h4",25),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"div")(11,"label",26)(12,"p",27),t.\u0275\u0275text(13,"Transaction type"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"tui-radio-labeled",28),t.\u0275\u0275text(15," Wallet "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"tui-radio-labeled",28),t.\u0275\u0275text(17," Category "),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(18,"div",29),t.\u0275\u0275element(19,"app-spends-ring",30),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(20,"div",31),t.\u0275\u0275element(21,"app-transactions-table",32),t.\u0275\u0275elementEnd()()()),2&o){const n=e.tuiLet,a=t.\u0275\u0275nextContext().tuiLet,r=t.\u0275\u0275nextContext();t.\u0275\u0275property("showLoader",!a),t.\u0275\u0275advance(1),t.\u0275\u0275classProp("tui-skeleton",!a),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(null==a?null:a.name),t.\u0275\u0275advance(1),t.\u0275\u0275property("height",2),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate2(" Current balance: ",null==a?null:a.amount," ",null==a||null==a.currency?null:a.currency.name," "),t.\u0275\u0275advance(5),t.\u0275\u0275property("formControl",r.transactionType)("item",r.TransactionTypes.Wallet),t.\u0275\u0275advance(2),t.\u0275\u0275property("formControl",r.transactionType)("item",r.TransactionTypes.Category),t.\u0275\u0275advance(3),t.\u0275\u0275property("transactionsSource",a)("transactions",n),t.\u0275\u0275advance(2),t.\u0275\u0275property("transactions",n)("transactionType",r.transactionType.value)}}function vt(o,e){if(1&o){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",1)(2,"a",2),t.\u0275\u0275element(3,"tui-svg",3),t.\u0275\u0275text(4," Wallets "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"tui-hosted-dropdown",4),t.\u0275\u0275listener("openChange",function(r){return t.\u0275\u0275restoreView(n),t.\u0275\u0275nextContext().buttonsDropdownOpen=r}),t.\u0275\u0275elementStart(6,"button",5),t.\u0275\u0275text(7," Options "),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(8,pt,1,2,"ng-template",null,6,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(10,mt,9,1,"ng-template",null,7,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(12,ut,4,7,"ng-template",null,8,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(14,gt,6,9,"ng-template",null,9,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275template(16,ht,22,15,"tui-loader",10),t.\u0275\u0275pipe(17,"async"),t.\u0275\u0275elementContainerEnd()}if(2&o){const n=t.\u0275\u0275reference(9),a=t.\u0275\u0275reference(11),r=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("shape","rounded"),t.\u0275\u0275advance(3),t.\u0275\u0275property("content",a)("open",r.buttonsDropdownOpen),t.\u0275\u0275advance(1),t.\u0275\u0275property("shape","rounded")("iconRight",n),t.\u0275\u0275advance(10),t.\u0275\u0275property("tuiLet",r.filterTransactions(t.\u0275\u0275pipeBind1(17,6,r.transactions$)||t.\u0275\u0275pureFunction0(8,E),r.transactionType.value))}}let d=class{constructor(e,n,a,r,i){this.store=e,this.dialogService=n,this.transactionService=a,this.notificationService=r,this.walletId$=i,this.SpendTargets=nt.P,this.TransactionTypes=O.e,this.buttonsDropdownOpen=!1,this.wallet$=c.y7.selectWallet(this.store,this.walletId$),this.transactions$=this.store.select(P.Xb.selectTransactions),this.wallets$=this.store.select(c.y7.selectWallets),this.categories$=this.store.select(N.rY.selectCategories),this.transactionType=new s.FormControl(O.e.Wallet)}ngOnInit(){this.walletId$.pipe((0,_.t)(this)).subscribe(e=>{this.store.dispatch(c.xr.loadWallet({walletId:e})),this.store.dispatch(P.RA.loadWalletTransactions({walletId:e}))}),this.store.dispatch(c.xr.loadWallets()),this.store.dispatch(N.Ge.loadCategories())}makeTransaction(e,n){this.transactionService.makeTransaction(e).pipe((0,B.U)(a=>{this.store.dispatch((0,A.addTransaction)({transaction:a})),n.complete(),this.notificationService.showSuccess("Yeeep!","A new transactions is already in your history")}),(0,D.K)(a=>{var r;throw this.notificationService.showError(`Whoops! Something went wrong ${null===(r=null==a?void 0:a.error)||void 0===r?void 0:r.error}`),a})).subscribe()}replenishWallet(e,n){this.transactionService.replenishWallet(e).pipe((0,B.U)(a=>{this.store.dispatch((0,A.addTransaction)({transaction:a})),n.complete(),this.notificationService.showSuccess("Yeeep!","A new transactions is already in your history")}),(0,D.K)(a=>{var r;throw this.notificationService.showError(`Whoops! Something went wrong ${null===(r=null==a?void 0:a.error)||void 0===r?void 0:r.error}`),a})).subscribe()}filterTransactions(e,n){return e.filter(n===O.e.Category?a=>a.category:a=>a.toWallet)}showDialog(e){this.dialogService.open(e).subscribe()}};d.\u0275fac=function(e){return new(e||d)(t.\u0275\u0275directiveInject(x.yh),t.\u0275\u0275directiveInject(ot.RO),t.\u0275\u0275directiveInject(at.p),t.\u0275\u0275directiveInject(lt.o),t.\u0275\u0275directiveInject(S.HZ))},d.\u0275cmp=t.\u0275\u0275defineComponent({type:d,selectors:[["app-wallet-view"]],features:[t.\u0275\u0275ProvidersFeature([S._7])],decls:2,vars:3,consts:[[4,"tuiLet"],[1,"buttons"],["routerLink","/wallets","tuiButton","","size","m",1,"hide-on-large","tui-space_right-2",3,"shape"],["src","tuiIconArrowLeft"],["tuiDropdownAlign","left",3,"content","open","openChange"],["tuiButton","","size","m",3,"shape","iconRight"],["icon",""],["dropdown",""],["replenishForm",""],["spendsForm",""],[3,"showLoader",4,"tuiLet"],["src","tuiIconChevronDown",1,"icon"],["tuiOption","",3,"routerLink"],["tuiOption","",3,"click"],[1,"spend-form"],[1,"tui-space_bottom-2"],[3,"disableSource","chosenDestination","wallets","spendTarget","submitTransaction","cancelTransaction"],[3,"chosenSource","wallets","categories","submitTransaction","cancelTransaction"],[3,"showLoader"],[1,"wallet-info"],[1,"info-top"],[1,"wallet-name-balance"],[1,"wallet-name"],[1,"tui-text_h3"],[3,"height"],[1,"tui-space_bottom-5"],["tuiLabel",""],[1,"tui-space_bottom-3"],[1,"tui-space_bottom-3",3,"formControl","item"],[1,"wallet-spends"],[3,"transactionsSource","transactions"],[1,"info-transactions"],[3,"transactions","transactionType"]],template:function(e,n){1&e&&(t.\u0275\u0275template(0,vt,18,9,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("tuiLet",t.\u0275\u0275pipeBind1(1,1,n.wallet$))},directives:[W.Ls,w.yS,T.v0,U.P,z.o1,G.Sw,y.qi,y.vK,rt.x,C.kM,it.X,K.A,H.Y,s.NgControlStatus,s.FormControlDirective,g,ct.k],pipes:[p.Ov],styles:[".buttons[_ngcontent-%COMP%]{margin-bottom:1rem}.hide-on-large[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 70rem){.hide-on-large[_ngcontent-%COMP%]{display:inline-block}}.wallet-info[_ngcontent-%COMP%]{padding:0 1rem 1rem}.wallet-name[_ngcontent-%COMP%]{max-width:300px}.info-top[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:3rem;margin-bottom:3rem}.wallet-name-balance[_ngcontent-%COMP%]{max-width:clamp(280px,40%,600px)}.wallet-spends[_ngcontent-%COMP%]{flex-grow:1;display:flex;align-items:center;justify-content:center}"],changeDetection:0}),(0,m.gn)([b.UM],d.prototype,"filterTransactions",null),d=(0,m.gn)([(0,_.c)()],d);var I=l(1643),ft=l(1841),_t=l(603),V=l(5635),J=l(9020),M=l(5645),Ct=l(1802),X=l(2436);function yt(o,e){if(1&o&&(t.\u0275\u0275elementStart(0,"button",14),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"tuiCurrency"),t.\u0275\u0275elementEnd()),2&o){const n=e.$implicit;t.\u0275\u0275property("value",n.id),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate2(" ",n.name," - ",t.\u0275\u0275pipeBind1(2,3,n.code)," ")}}function wt(o,e){if(1&o&&(t.\u0275\u0275elementStart(0,"tui-data-list"),t.\u0275\u0275template(1,yt,3,5,"button",13),t.\u0275\u0275elementEnd()),2&o){const n=t.\u0275\u0275nextContext().tuiLet;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",n)}}function xt(o,e){if(1&o&&(t.\u0275\u0275elementStart(0,"tui-select",11),t.\u0275\u0275text(1," Currency "),t.\u0275\u0275template(2,wt,2,1,"tui-data-list",12),t.\u0275\u0275elementEnd()),2&o){const n=e.tuiLet,a=t.\u0275\u0275nextContext(),r=t.\u0275\u0275reference(13);t.\u0275\u0275property("valueContent",n?a.stringifyCurrency(n):r)}}function Wt(o,e){1&o&&t.\u0275\u0275element(0,"tui-loader",15)}class h{constructor(e,n){this.store=e,this.stringifyHelper=n,this.formAct=I.w.Create,this.title="Create a wallet",this.submitWallet=new t.EventEmitter,this.currencies$=this.store.select(ft.TJ.selectCurrencies),this.walletForm=(new s.FormBuilder).group({name:["",[s.Validators.required]],currencyId:[null,[s.Validators.required]]})}ngOnChanges(){var e;this.formAct===I.w.Update&&(null===(e=this.walletForm.get("currencyId"))||void 0===e||e.disable()),this.walletForm.patchValue(Object.assign({},this.wallet),{onlySelf:!0})}submitForm(){var e;this.walletForm.invalid||this.submitWallet.emit(Object.assign({id:(null===(e=this.wallet)||void 0===e?void 0:e.id)||null},this.walletForm.getRawValue()))}stringifyCurrency(e){return this.stringifyHelper.stringifyCurrency(e)}}h.\u0275fac=function(e){return new(e||h)(t.\u0275\u0275directiveInject(x.yh),t.\u0275\u0275directiveInject(_t._))},h.\u0275cmp=t.\u0275\u0275defineComponent({type:h,selectors:[["app-wallet-form"]],inputs:{formAct:"formAct",title:"title",wallet:"wallet"},outputs:{submitWallet:"submitWallet"},features:[t.\u0275\u0275NgOnChangesFeature],decls:17,vars:6,consts:[[1,"wallet-create"],[3,"formGroup"],[1,"tui-form__header","tui-form__header_margin-top_none"],[1,"tui-form__row"],["formControlName","name"],["tuiTextfield","","type","text"],[1,"tui-form__row","limit-group"],["formControlName","currencyId",3,"valueContent",4,"tuiLet"],["loading",""],[1,"tui-form__buttons"],["tuiButton","","size","l","shape","rounded",3,"click"],["formControlName","currencyId",3,"valueContent"],[4,"tuiDataList"],["tuiOption","",3,"value",4,"ngFor","ngForOf"],["tuiOption","",3,"value"],[1,"tui-space_vertical-3","loader"]],template:function(e,n){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"form",1)(2,"h2",2),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),t.\u0275\u0275text(6," Enter a name for wallet "),t.\u0275\u0275element(7,"input",5),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(8,"tui-field-error",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"div",6),t.\u0275\u0275template(10,xt,3,1,"tui-select",7),t.\u0275\u0275pipe(11,"async"),t.\u0275\u0275template(12,Wt,1,0,"ng-template",null,8,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"div",9)(15,"button",10),t.\u0275\u0275listener("click",function(){return n.submitForm()}),t.\u0275\u0275text(16),t.\u0275\u0275elementEnd()()()()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("formGroup",n.walletForm),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",n.title," "),t.\u0275\u0275advance(7),t.\u0275\u0275property("tuiLet",t.\u0275\u0275pipeBind1(11,4,n.currencies$)),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ",n.formAct," "))},directives:[s.\u0275NgNoValidate,s.NgControlStatusGroup,s.FormGroupDirective,V.K3,V.wU,s.NgControlStatus,s.FormControlName,Ct.MB,J.y,W.Ls,M.uJ,M.OI,y.gX,y.qi,p.sg,y.vK,C.kM,T.v0],pipes:[p.Ov,X.i],styles:[".wallet-create[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.limit-group[_ngcontent-%COMP%]{max-width:10rem}"]}),(0,m.gn)([b.UM],h.prototype,"stringifyCurrency",null);let Tt=(()=>{class o{constructor(n){this.store=n}createWallet(n){this.store.dispatch(c.xr.createWallet({walletDto:n}))}}return o.\u0275fac=function(n){return new(n||o)(t.\u0275\u0275directiveInject(x.yh))},o.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-wallet-create"]],decls:1,vars:0,consts:[[3,"submitWallet"]],template:function(n,a){1&n&&(t.\u0275\u0275elementStart(0,"app-wallet-form",0),t.\u0275\u0275listener("submitWallet",function(i){return a.createWallet(i)}),t.\u0275\u0275elementEnd())},directives:[h],styles:[""]}),o})();function St(o,e){if(1&o){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"tui-loader",1)(2,"app-wallet-form",2),t.\u0275\u0275listener("submitWallet",function(r){return t.\u0275\u0275restoreView(n),t.\u0275\u0275nextContext().updateWallet(r)}),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementContainerEnd()}if(2&o){const n=e.tuiLet,a=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("showLoader",!n)("overlay",!0),t.\u0275\u0275advance(1),t.\u0275\u0275property("formAct",a.FormActs.Update)("wallet",t.\u0275\u0275pipeBind1(3,4,a.wallet$))}}let v=class{constructor(e,n){this.store=e,this.walletId$=n,this.wallet$=c.y7.selectSimpleWallet(this.store,this.walletId$),this.FormActs=I.w}ngOnInit(){this.walletId$.pipe((0,_.t)(this),(0,R.h)(e=>!!e)).subscribe(e=>{this.store.dispatch(c.xr.loadWallet({walletId:e}))})}updateWallet(e){const{id:n}=e,a=(0,m._T)(e,["id"]);this.store.dispatch(c.xr.updateWallet({walletId:n,walletDto:a}))}};v.\u0275fac=function(e){return new(e||v)(t.\u0275\u0275directiveInject(x.yh),t.\u0275\u0275directiveInject(S.HZ))},v.\u0275cmp=t.\u0275\u0275defineComponent({type:v,selectors:[["app-wallet-edit"]],features:[t.\u0275\u0275ProvidersFeature([S._7])],decls:2,vars:3,consts:[[4,"tuiLet"],[3,"showLoader","overlay"],["title","Edit a wallet",3,"formAct","wallet","submitWallet"]],template:function(e,n){1&e&&(t.\u0275\u0275template(0,St,4,6,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&e&&t.\u0275\u0275property("tuiLet",t.\u0275\u0275pipeBind1(1,1,n.wallet$))},directives:[W.Ls,C.kM,h],pipes:[p.Ov],styles:[""],changeDetection:0}),v=(0,m.gn)([(0,_.c)()],v);const bt=[{path:"",component:u},{path:"create",component:Tt},{path:"edit/:id",component:v},{path:":id",component:d}];let Et=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=t.\u0275\u0275defineInjector({imports:[[w.Bz.forChild(bt)],w.Bz]}),o})();var Ft=l(4951),Lt=l(6481);let Ot=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=t.\u0275\u0275defineInjector({imports:[[p.ez,Et,C.dS,j.y,W.WD,Ft.m,U.E,y.pc,T.fN,G.Cu,z.jh,s.ReactiveFormsModule,J.C,V.Qf,M.Jy,X.w,Y.R,Lt.DC,K.U,H._]]}),o})()}}]);