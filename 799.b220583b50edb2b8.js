"use strict";(self.webpackChunkcashcontrol=self.webpackChunkcashcontrol||[]).push([[799],{1643:(x,h,o)=>{o.d(h,{w:()=>c});var c=(()=>{return(a=c||(c={})).Create="Create",a.Update="Update",c;var a})()},5221:(x,h,o)=>{o.d(h,{HZ:()=>c.HZ,_7:()=>c._7});var c=o(249)},6799:(x,h,o)=>{o.r(h),o.d(h,{UsersModule:()=>$});var c=o(9808),a=o(1958),m=o(1497),I=o(4004),e=o(5e3),U=o(7319),y=o(6693),l=o(2079),f=o(22),g=o(1105),d=o(3112),M=o(4620);function D(n,s){1&n&&e.\u0275\u0275element(0,"tui-svg",10)}function b(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",t.user.name," is the owner of an account")}}let T=(()=>{class n{constructor(){this.isSelected=!1,this.selectUser=new e.EventEmitter}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-user-item"]],inputs:{user:"user",isSelected:"isSelected"},outputs:{selectUser:"selectUser"},decls:14,vars:7,consts:[["textAlign","center"],[1,"island-body"],[1,"growable",3,"routerLink"],[1,"image"],["src","https://picsum.photos/400/400",3,"alt"],[1,"tui-island__title"],["tuiHintDirection","right",3,"tuiHint"],["src","tuiIconTooltip",4,"ngIf"],["isOwner",""],["tuiButton","","type","button","appearance","flat","size","m",1,"tui-island__footer-button",3,"disabled","click"],["src","tuiIconTooltip"]],template:function(t,u){if(1&t&&(e.\u0275\u0275elementStart(0,"tui-island",0)(1,"div",1)(2,"a",2)(3,"div")(4,"div",3),e.\u0275\u0275element(5,"img",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"h3",5)(7,"span",6),e.\u0275\u0275text(8),e.\u0275\u0275template(9,D,1,0,"tui-svg",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,b,2,1,"ng-template",null,8,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"button",9),e.\u0275\u0275listener("click",function(){return u.selectUser.emit(u.user.id)}),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd()()()),2&t){const _=e.\u0275\u0275reference(11);e.\u0275\u0275advance(2),e.\u0275\u0275property("routerLink","/users/"+u.user.id+"/edit"),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate1("alt","",u.user.name," is looking for some money"),e.\u0275\u0275advance(2),e.\u0275\u0275property("tuiHint",u.user.isOwner?_:null),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",u.user.name," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",u.user.isOwner),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",u.isSelected),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",u.isSelected?"You":"Use"," ")}},directives:[g.h,a.yS,d.D,c.O5,M.P,y.v0],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:inherit}tui-island[_ngcontent-%COMP%]{height:100%;box-sizing:border-box;transition:background-color .3s ease;border-radius:3rem}tui-island[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.island-body[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.growable[_ngcontent-%COMP%]{flex-grow:1}.image[_ngcontent-%COMP%]{border-radius:50%;width:150px;height:150px;margin:0 auto 1rem;overflow:hidden}.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;object-fit:cover}"]}),n})();function A(n,s){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"app-user-item",5),e.\u0275\u0275listener("selectUser",function(_){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext(2).setCurrentUser(_)}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()}if(2&n){const t=s.$implicit,u=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("user",t)("isSelected",t.id===e.\u0275\u0275pipeBind1(1,2,u.currentUserId$))}}function S(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"tui-loader",2)(1,"div",3),e.\u0275\u0275template(2,A,2,4,"app-user-item",4),e.\u0275\u0275elementEnd()()),2&n){const t=s.tuiLet;e.\u0275\u0275property("showLoader",0===(null==t?null:t.length))("overlay",!0),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t)}}let L=(()=>{class n{constructor(t,u){this.store=t,this.router=u,this.users$=this.store.select(m.G0.selectUsers),this.currentUserId$=this.store.select(m.G0.selectCurrentUser).pipe((0,I.U)(_=>null==_?void 0:_.id))}setCurrentUser(t){this.store.dispatch(m.EJ.setCurrentUser({userId:t})),this.router.navigate(["dashboard"])}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(U.yh),e.\u0275\u0275directiveInject(a.F0))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-users-table"]],decls:4,vars:3,consts:[["routerLink","/users/create","tuiButton","","size","m","shape","rounded",1,"tui-space_bottom-3"],[3,"showLoader","overlay",4,"tuiLet"],[3,"showLoader","overlay"],[1,"users-grid"],[3,"user","isSelected","selectUser",4,"ngFor","ngForOf"],[3,"user","isSelected","selectUser"]],template:function(t,u){1&t&&(e.\u0275\u0275elementStart(0,"a",0),e.\u0275\u0275text(1," Create user\n"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(2,S,3,3,"tui-loader",1),e.\u0275\u0275pipe(3,"async")),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("tuiLet",e.\u0275\u0275pipeBind1(3,1,u.users$)))},directives:[a.yS,y.v0,f.Ls,l.kM,c.sg,T],pipes:[c.Ov],styles:[".users-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));grid-gap:1rem;gap:1rem}"]}),n})();var C=o(2382),O=o(1643),P=o(5635),r=o(9020),i=o(1802);let p=(()=>{class n{constructor(){this.formAct=O.w.Create,this.title="Create a user",this.submitUser=new e.EventEmitter,this.userForm=(new C.FormBuilder).group({name:["",[C.Validators.required]]})}ngOnChanges(){this.userForm.patchValue(Object.assign({},this.user),{onlySelf:!0})}submitForm(){var t;this.userForm.invalid||this.submitUser.emit(Object.assign({id:(null===(t=this.user)||void 0===t?void 0:t.id)||null},this.userForm.getRawValue()))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-user-form"]],inputs:{formAct:"formAct",title:"title",user:"user"},outputs:{submitUser:"submitUser"},features:[e.\u0275\u0275NgOnChangesFeature],decls:12,vars:3,consts:[[1,"create-form"],[3,"formGroup"],[1,"tui-form__header","tui-form__header_margin-top_none"],[1,"tui-form__row"],["formControlName","name"],["tuiTextfield","","type","text"],[1,"tui-form__buttons"],["tuiButton","","size","l","shape","rounded",3,"click"]],template:function(t,u){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"form",1)(2,"h2",2),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",3)(5,"tui-input",4),e.\u0275\u0275text(6," Enter a user name "),e.\u0275\u0275element(7,"input",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(8,"tui-field-error",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",6)(10,"button",7),e.\u0275\u0275listener("click",function(){return u.submitForm()}),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()()()()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",u.userForm),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",u.title," "),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate1(" ",u.formAct," "))},directives:[C.\u0275NgNoValidate,C.NgControlStatusGroup,C.FormGroupDirective,P.K3,P.wU,C.NgControlStatus,C.FormControlName,i.MB,r.y,y.v0],styles:[".create-form[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.limit-group[_ngcontent-%COMP%]{max-width:20rem}"]}),n})(),v=(()=>{class n{constructor(t){this.store=t}createUser(t){this.store.dispatch(m.EJ.createUser({userDto:t}))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(U.yh))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-user-create"]],decls:1,vars:0,consts:[[3,"submitUser"]],template:function(t,u){1&t&&(e.\u0275\u0275elementStart(0,"app-user-form",0),e.\u0275\u0275listener("submitUser",function(F){return u.createUser(F)}),e.\u0275\u0275elementEnd())},directives:[p],styles:[""]}),n})();var z=o(655),B=o(5221),j=o(9300),R=o(4987);function w(n,s){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tui-loader",1)(2,"app-user-form",2),e.\u0275\u0275listener("submitUser",function(_){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().updateUser(_)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=s.tuiLet,u=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("showLoader",!t)("overlay",!0),e.\u0275\u0275advance(1),e.\u0275\u0275property("user",t)("formAct",u.FormActs.Update)}}let E=class{constructor(s,t){this.store=s,this.userId$=t,this.user$=m.G0.selectUser(this.store,this.userId$),this.FormActs=O.w}ngOnInit(){this.userId$.pipe((0,R.t)(this),(0,j.h)(s=>!!s)).subscribe(s=>{this.store.dispatch(m.EJ.getAccountUser({userId:s}))})}updateUser(s){const{id:t}=s,u=(0,z._T)(s,["id"]);this.store.dispatch(m.EJ.updateUser({userId:t,userDto:u}))}};E.\u0275fac=function(s){return new(s||E)(e.\u0275\u0275directiveInject(U.yh),e.\u0275\u0275directiveInject(B.HZ))},E.\u0275cmp=e.\u0275\u0275defineComponent({type:E,selectors:[["app-suer-edit"]],features:[e.\u0275\u0275ProvidersFeature([B._7])],decls:2,vars:3,consts:[[4,"tuiLet"],[3,"showLoader","overlay"],["title","Edit a user",3,"user","formAct","submitUser"]],template:function(s,t){1&s&&(e.\u0275\u0275template(0,w,3,4,"ng-container",0),e.\u0275\u0275pipe(1,"async")),2&s&&e.\u0275\u0275property("tuiLet",e.\u0275\u0275pipeBind1(1,1,t.user$))},directives:[f.Ls,l.kM,p],pipes:[c.Ov],styles:[""],changeDetection:0}),E=(0,z.gn)([(0,R.c)()],E);const H=[{path:"",component:L},{path:"create",component:v},{path:":id/edit",component:E}];let N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.ez,a.Bz.forChild(H)]]}),n})(),$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[c.ez,N,M.E,y.fN,l.dS,f.WD,g.y,d.go,C.ReactiveFormsModule,P.Qf,r.C,a.Bz]]}),n})()},1105:(x,h,o)=>{o.d(h,{h:()=>U,y:()=>y});var c=o(2014),a=o(5e3),m=o(3442),I=o(9808);const e=["*"];let U=(()=>{let l=class{constructor(){this.size="m",this.textAlign="left",this.hoverable=!1,this.transparent=!1}get sizeS(){return"s"===this.size}get sizeM(){return"m"===this.size}get sizeL(){return"l"===this.size}get textAlignLeft(){return"left"===this.textAlign}get textAlignCenter(){return"center"===this.textAlign}get textAlignRight(){return"right"===this.textAlign}};return l.\u0275fac=function(g){return new(g||l)},l.\u0275cmp=a.\u0275\u0275defineComponent({type:l,selectors:[["tui-island"],["a","tuiIsland",""]],hostAttrs:[1,"tui-island"],hostVars:16,hostBindings:function(g,d){2&g&&a.\u0275\u0275classProp("tui-island_hoverable",d.hoverable)("tui-island_transparent",d.transparent)("tui-island_size_s",d.sizeS)("tui-island_size_m",d.sizeM)("tui-island_size_l",d.sizeL)("tui-island_text-align_left",d.textAlignLeft)("tui-island_text-align_center",d.textAlignCenter)("tui-island_text-align_right",d.textAlignRight)},inputs:{size:"size",textAlign:"textAlign",hoverable:"hoverable",transparent:"transparent"},ngContentSelectors:e,decls:1,vars:0,template:function(g,d){1&g&&(a.\u0275\u0275projectionDef(),a.\u0275\u0275projection(0))},styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),(0,c.gn)([(0,a.Input)(),(0,m.TH)()],l.prototype,"size",void 0),(0,c.gn)([(0,a.Input)(),(0,m.TH)()],l.prototype,"textAlign",void 0),(0,c.gn)([(0,a.Input)(),(0,a.HostBinding)("class.tui-island_hoverable"),(0,m.TH)()],l.prototype,"hoverable",void 0),(0,c.gn)([(0,a.Input)(),(0,a.HostBinding)("class.tui-island_transparent"),(0,m.TH)()],l.prototype,"transparent",void 0),(0,c.gn)([(0,a.HostBinding)("class.tui-island_size_s")],l.prototype,"sizeS",null),(0,c.gn)([(0,a.HostBinding)("class.tui-island_size_m")],l.prototype,"sizeM",null),(0,c.gn)([(0,a.HostBinding)("class.tui-island_size_l")],l.prototype,"sizeL",null),(0,c.gn)([(0,a.HostBinding)("class.tui-island_text-align_left")],l.prototype,"textAlignLeft",null),(0,c.gn)([(0,a.HostBinding)("class.tui-island_text-align_center")],l.prototype,"textAlignCenter",null),(0,c.gn)([(0,a.HostBinding)("class.tui-island_text-align_right")],l.prototype,"textAlignRight",null),l})(),y=(()=>{let l=class{};return l.\u0275fac=function(g){return new(g||l)},l.\u0275mod=a.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=a.\u0275\u0275defineInjector({imports:[[I.ez]]}),l})()},4987:(x,h,o)=>{o.d(h,{c:()=>L,t:()=>O});var c=o(7579),a=o(727),m=o(5e3),I=o(2722);const e=m.\u0275NG_PIPE_DEF,y=Symbol("__destroy"),l=Symbol("__decoratorApplied");function f(r){return"string"==typeof r?Symbol(`__destroy__${r}`):y}function d(r,i){r[i]||(r[i]=new c.x)}function M(r,i){r[i]&&(r[i].next(),r[i].complete(),r[i]=null)}function D(r){r instanceof a.w0&&r.unsubscribe()}function T(r,i){return function(){var p;if(r&&r.call(this),M(this,f()),i.arrayName&&function b(r){Array.isArray(r)&&r.forEach(D)}(this[i.arrayName]),i.checkProperties)for(const v in this)(null===(p=i.blackList)||void 0===p?void 0:p.includes(v))||D(this[v])}}function L(r={}){return i=>{!function U(r){return!!r[e]}(i)?function A(r,i){r.prototype.ngOnDestroy=T(r.prototype.ngOnDestroy,i)}(i,r):function S(r,i){const p=r.\u0275pipe;p.onDestroy=T(p.onDestroy,i)}(i,r),function g(r){r.prototype[l]=!0}(i)}}function O(r,i){return p=>{const v=f(i);return"string"==typeof i?function C(r,i,p){const v=r[i];d(r,p),r[i]=function(){v.apply(this,arguments),M(this,p),r[i]=v}}(r,i,v):d(r,v),p.pipe((0,I.R)(r[v]))}}}}]);